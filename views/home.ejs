<!DOCTYPE html>
<html lang="en">
  <%- include('./partials/head.ejs')%>
  <body>
    <%- include('./partials/header.ejs')%>
    <div>
      <% if (user) {%>
      <div class="welcome-container">
        <h4>WELCOME BACK <%= user.username %></h1>
      </div>
      <% } else { %>
      <div class="welcome-container">
        <h4>Welcome to ClubLand</h4>
        <p>Sign up and contribute to the community today!</p>
      </div>
      <%}%> <% if(messages.length >0 ) { %> <% messages.forEach((post) => { %>
      <div class="posts-container">
        <% if (user === undefined) {%>
        <div class="post">
          <div><h5><%=post.title%></h5></div>
          <div><%=post.message%></div>
          <div class="sign-up-message">Sign up and become a member to view more details</div>
        </div>
        <%} else if (user.isAdmin && !user.isMember) {%>
        <div class="post">
          <div><h5><%=post.title%></h5></div>
          <div><%=post.message%></div>
          <div>
            <button class="delete-button" data-doc="<%=post._id%>">
              Delete
            </button>
          </div>
          <div class="sign-up-message">Become a member to view who made this post and when</div>
        </div>
        <%} else if (!user.isAdmin && user.isMember) {%>
        <div class="post">
          <div><h5><%=post.title%></h5></div>
          <div><%=post.message%></div>
          <div>By: <%=post.username%></div>
          <div>Date: <%=post.createdAt%></div>
          <div class="sign-up-message">Create a new user to become an Admin and delete posts</div>
        </div>
        <%} else if (user.isAdmin && user.isMember) {%>
        <div class="post">
          <div><h5><%=post.title%></h5></div>
          <div><%=post.message%></div>
          <div>By: <%=post.username%></div>
          <div>Date: <%=post.createdAt%></div>
          <div>
            <button class="delete-button" data-doc="<%=post._id%>">
              Delete
            </button>
          </div>
        </div>
      </div>
      <%}})} else {%>
      <p>No messages found</p>
      <%}%>
    </div>
    <%- include('./partials/footer.ejs')%>
  </body>
</html>
